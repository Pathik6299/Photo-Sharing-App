{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pathi\\\\ReactPathik\\\\src\\\\pages\\\\home.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axiosInstance from \"../services/axiosInstance\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const inputFileRef = /*#__PURE__*/React.createRef();\n  const [image, setImage] = useState();\n  const [allImage, setAllImage] = useState([]);\n  useEffect(() => {\n    getAllImage();\n    getUserImage();\n  }, []);\n  const handleBtnClick = () => {\n    inputFileRef.current.click();\n  };\n\n  //get all image\n  const getAllImage = async () => {\n    try {\n      console.log(localStorage.getItem(\"user_id\"));\n      const response = await axiosInstance.post(\"get_all_img\", {\n        \"user_id\": localStorage.getItem(\"user_id\")\n      });\n      if (response) {\n        setAllImage(response.data.data);\n      }\n    } catch (error) {}\n  };\n  const getUserImage = async () => {\n    try {\n      const response = await axiosInstance.post(\"get_user_img\", {\n        \"user_id\": localStorage.getItem(\"user_id\")\n      });\n      if (response) {\n        setImage(response.data);\n      }\n    } catch (error) {}\n  };\n\n  //handle file change\n  const onFileChange = async event => {\n    console.log(event);\n    try {\n      console.log(\"Hello--1\");\n      let files = event.target.files;\n      let finalExtension = event.target.files[0].name;\n      console.log(\"Hello--2\");\n      const getExtension = finalExtension.substr(finalExtension.lastIndexOf(\".\") + 1);\n      console.log(\"Hello--3\");\n      if (getExtension === \"png\" || getExtension === \"PNG\" || getExtension === \"jpg\" || getExtension === \"JPG\" || getExtension === \"jpeg\" || getExtension === \"JPEG\") {\n        console.log(\"Hello--4\");\n        const userDetail = localStorage.getItem(\"user_id\");\n        const formData = new FormData();\n        formData.append(\"image\", files[0]);\n        formData.append(\"user_id\", userDetail);\n        const response = await axiosInstance.post(\"image_upload\", formData);\n        if (response) {\n          getAllImage();\n        }\n      } else {\n        alert(\"Please Upload png or jpg or jpeg\");\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n  const like = async img_id => {\n    try {\n      const userDetail = localStorage.getItem(\"user_id\");\n      const requestdata = {\n        image_id: img_id,\n        user_id: userDetail\n      };\n      const response = await axiosInstance.post(\"like\", requestdata);\n      if (response) {\n        getAllImage();\n      }\n    } catch (error) {}\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"container mb-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-between mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile_img\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-login mt-5\",\n          onClick: () => handleBtnClick(),\n          children: \"Add Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          ref: inputFileRef,\n          style: {\n            display: \"none\"\n          },\n          name: \"profile_pic\",\n          onChange: e => onFileChange(e),\n          accept: \"image/*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: allImage.length > 0 && allImage.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: \"100%\",\n              height: \"350px\",\n              marginTop: 20\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              style: {\n                height: '100%',\n                width: \"100%\"\n              },\n              src: `http://pathik6299.pythonanywhere.com/media/${item.image_url}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 15\n            }, this), item.likes.length > 0 && item.likes.filter(l => l.ImageID_id === item.ImageID) ? /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fas fa-heart heart\",\n              onClick: () => like(item.ImageID)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 97\n            }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"far fa-heart heart\",\n              onClick: () => like(item.ImageID)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(Home, \"s7fKZM0Snsr2waNCOD7kIOChd5k=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","axiosInstance","Home","inputFileRef","createRef","image","setImage","allImage","setAllImage","getAllImage","getUserImage","handleBtnClick","current","click","console","log","localStorage","getItem","response","post","data","error","onFileChange","event","files","target","finalExtension","name","getExtension","substr","lastIndexOf","userDetail","formData","FormData","append","alert","e","like","img_id","requestdata","image_id","user_id","display","length","map","item","index","width","height","marginTop","image_url","likes","filter","l","ImageID_id","ImageID"],"sources":["C:/Users/pathi/ReactPathik/src/pages/home.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axiosInstance from \"../services/axiosInstance\";\r\n\r\nconst Home = () => {\r\n  const inputFileRef = React.createRef();\r\n  const [image, setImage] = useState();\r\n  const [allImage, setAllImage] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getAllImage();\r\n    getUserImage();\r\n  }, []);\r\n\r\n  const handleBtnClick = () => {\r\n    inputFileRef.current.click();\r\n  };\r\n\r\n  //get all image\r\n  const getAllImage = async () => {\r\n    try {\r\n      console.log(localStorage.getItem(\"user_id\"))\r\n      const response = await axiosInstance.post(\"get_all_img\", {\r\n        \"user_id\":localStorage.getItem(\"user_id\")\r\n      });\r\n      if (response) {\r\n        setAllImage(response.data.data);\r\n      }\r\n    } catch (error) {}\r\n  };\r\n\r\n  const getUserImage = async () => {\r\n    try {\r\n      const response = await axiosInstance.post(\"get_user_img\", {\r\n        \"user_id\":localStorage.getItem(\"user_id\")\r\n      });\r\n      if (response) {\r\n        setImage(response.data);\r\n      }\r\n    } catch (error) {}\r\n  };\r\n\r\n  //handle file change\r\n  const onFileChange = async (event) => {\r\n    console.log(event)\r\n    try{\r\n      console.log(\"Hello--1\")\r\n      let files = event.target.files;\r\n      let finalExtension = event.target.files[0].name;\r\n       console.log(\"Hello--2\")\r\n\r\n      const getExtension = finalExtension.substr(\r\n        finalExtension.lastIndexOf(\".\") + 1\r\n      );\r\n       console.log(\"Hello--3\")\r\n\r\n      if (\r\n        getExtension === \"png\" ||\r\n        getExtension === \"PNG\" ||\r\n        getExtension === \"jpg\" ||\r\n        getExtension === \"JPG\" ||\r\n        getExtension === \"jpeg\" ||\r\n        getExtension === \"JPEG\"\r\n      ) {\r\n         console.log(\"Hello--4\")\r\n\r\n        const userDetail = localStorage.getItem(\"user_id\");\r\n        const formData = new FormData();\r\n\r\n        formData.append(\"image\", files[0]);\r\n        formData.append(\"user_id\", userDetail);\r\n\r\n        const response = await axiosInstance.post(\"image_upload\", formData);\r\n        if(response){\r\n          getAllImage();\r\n        }\r\n      } else {\r\n        alert(\"Please Upload png or jpg or jpeg\");\r\n      }\r\n    }catch(e){\r\n      console.log(e)\r\n    }\r\n  };\r\n\r\n  const like = async (img_id) => {\r\n    try {\r\n      const userDetail = localStorage.getItem(\"user_id\");\r\n      const requestdata = {\r\n        image_id: img_id,\r\n        user_id: userDetail,\r\n      };\r\n      const response = await axiosInstance.post(\"like\", requestdata);\r\n      if(response){\r\n        getAllImage();\r\n      }\r\n    } catch (error) {}\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <section className=\"container mb-5\">\r\n        <div className=\"d-flex justify-content-between mt-5\">\r\n          <div className=\"profile_img\">\r\n           \r\n          </div>\r\n          <button className=\"btn-login mt-5\" onClick={() => handleBtnClick()}>\r\n            Add Post\r\n          </button>\r\n          <input\r\n            type=\"file\"\r\n            ref={inputFileRef}\r\n            style={{ display: \"none\" }}\r\n            name=\"profile_pic\"\r\n            onChange={(e) => onFileChange(e)}\r\n            accept=\"image/*\"\r\n          />\r\n        </div>\r\n        <hr />\r\n        <div className=\"row\">\r\n          {allImage.length > 0 && allImage.map((item, index) => (\r\n            <div className=\"col-3\" key={index}>\r\n              <div\r\n                style={{\r\n                  width: \"100%\",\r\n                  height: \"350px\",\r\n                  marginTop: 20,\r\n                }}\r\n              >\r\n              <img style={{height:'100%',width:\"100%\"}} src={`http://pathik6299.pythonanywhere.com/media/${item.image_url}`}/>\r\n               {item.likes.length > 0 && item.likes.filter(l=>l.ImageID_id === item.ImageID)  ? <i\r\n                  class=\"fas fa-heart heart\"\r\n                  onClick={() => like(item.ImageID)}\r\n                ></i> :\r\n                  <i\r\n                  class=\"far fa-heart heart\"\r\n                  onClick={() => like(item.ImageID)}\r\n                ></i>  }              \r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n        </div>\r\n      </section>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}